(this["webpackJsonpreact-firebase-blog"]=this["webpackJsonpreact-firebase-blog"]||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t),n.d(t,"Context",(function(){return w}));var a=n(2),s=n.n(a),c=n(33),r=n.n(c),o=(n(41),n(12)),i=(n(42),n(24)),l=n(13),u=n.n(l),d=n(19),b=n(9),p=n(18),j=n(17),m=n(4),h=function(e){var t=Object(a.useContext)(w).auth,n=Object(p.a)(t),s=Object(o.a)(n,1)[0],c=function(){var e=Object(d.a)(u.a.mark((function e(){var n,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new j.a.auth.GoogleAuthProvider,e.next=3,t.signInWithPopup(n);case 3:a=e.sent,s=a.user,console.log(s);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("nav",{className:"container navbar navbar-light justify-content-between",style:{height:"66px"},children:[Object(m.jsx)(b.b,{to:"/",className:"navbar-brand",children:s?Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{className:"mr-2",children:Object(m.jsx)("img",{src:s.photoURL,alt:s.photoURL,style:{borderRadius:"50%",width:"50px",height:"50px"}})}),Object(m.jsx)("span",{children:s.displayName})]}):Object(m.jsx)("span",{children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0430\u0432\u0442\u043e\u0438\u0437\u043e\u0432\u0430\u043d"})}),s?Object(m.jsx)("button",{onClick:function(){return t.signOut()},className:"btn btn-outline-danger my-2 my-sm-0",type:"submit",children:"Sign out"}):Object(m.jsx)("button",{onClick:c,className:"btn btn-outline-success my-2 my-sm-0",type:"submit",children:"Sign in"})]})},g=n(36),f=function(){return Object(m.jsx)("div",{className:"loader"})},O=function(){var e=Object(a.useContext)(w),t=e.auth,n=e.firestore,s=Object(p.a)(t),c=Object(o.a)(s,1)[0],r=Object(a.useState)(""),i=Object(o.a)(r,2),l=i[0],b=i[1],h=Object(a.useState)(""),O=Object(o.a)(h,2),x=O[0],v=O[1],y=Object(a.useState)(""),N=Object(o.a)(y,2),C=N[0],S=N[1],k=Object(a.useState)(""),L=Object(o.a)(k,2),T=L[0],A=L[1],R=Object(g.a)(n.collection("posts").orderBy("createdAt")),F=Object(o.a)(R,2),I=F[0],_=F[1];n.collection("posts").get().then((function(e){e.docs.forEach((function(e){n.collection("posts").doc(e.id).update({docToken:e.id})}))}));var q=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c?(a=t.target.closest(".input-group").querySelector(".input-title"),s=t.target.closest(".input-group").querySelector(".input-message"),l.length>0&&x.length>0?(n.collection("posts").add({uid:c.uid,displayName:c.displayName,photoURL:c.photoURL,email:c.email,title:x,text:l,createdAt:j.a.firestore.FieldValue.serverTimestamp()}),b(""),v(""),s.classList.remove("alert-danger"),s.classList.remove("alert-success"),a.classList.remove("alert-danger"),a.classList.remove("alert-success")):(a.value.length<1?a.classList.add("alert-danger"):a.classList.add("alert-success"),s.value.length<1?s.classList.add("alert-danger"):s.classList.add("alert-success"))):alert("\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.getAttribute("data-id"),n.collection("posts").doc(a).delete();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,s,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.getAttribute("data-id"),s=t.target.closest(".jumbotron").querySelector(".input-group__doc-change"),c=t.target.closest(".jumbotron").querySelector(".input-title").value,r=t.target.closest(".jumbotron").querySelector(".input-message").value,n.collection("posts").doc(a).update({title:c,text:r}),s.classList.remove("active"),A(""),S("");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return _?Object(m.jsx)(f,{}):Object(m.jsxs)("div",{className:"container",children:[Object(m.jsxs)("div",{className:"input-group mb-2",children:[Object(m.jsx)("input",{type:"text",className:"form-control input-title",style:{width:"25%",borderRadius:".25rem 0 0 .25rem"},onChange:function(e){return v(e.target.value)},value:x,placeholder:"Title"}),Object(m.jsx)("input",{type:"text",className:"form-control input-message mr-2",style:{width:"65%",borderRadius:"0 .25rem .25rem 0"},onChange:function(e){return b(e.target.value)},value:l,placeholder:"Message"}),Object(m.jsx)("button",{className:"btn btn-outline-primary",type:"button",onClick:function(e){return q(e)},children:"Add post"})]}),Object(m.jsx)("div",{children:I.length?I.map((function(e,t){return Object(m.jsxs)("div",{className:"jumbotron position-relative",children:[Object(m.jsx)("h1",{className:"display-4",children:e.title}),Object(m.jsx)("p",{className:"lead",children:e.text}),Object(m.jsx)("hr",{className:"my-4"}),Object(m.jsxs)("p",{children:["Author: ",e.displayName," / ",e.email]}),!(!c||c.uid!==e.uid)&&Object(m.jsxs)("div",{className:"d-flex justify-content-end",style:{position:"absolute",top:"1rem",right:"1rem"},children:[Object(m.jsx)("button",{type:"button",className:"close mr-2",style:{fontSize:"1rem"},"data-id":e.docToken,onClick:function(e){return e.target.closest(".jumbotron").querySelector(".input-group__doc-change").classList.toggle("active")},"aria-label":"Close",children:"change"}),Object(m.jsx)("button",{type:"button",className:"close",style:{fontSize:"1rem"},"data-id":e.docToken,onClick:function(e){return U(e)},"aria-label":"Close",children:"delete"})]}),Object(m.jsxs)("div",{className:"input-group m-2 position-absolute input-group__doc-change",style:{bottom:"0",left:"0"},children:[Object(m.jsx)("input",{type:"text",className:"form-control input-title",style:{width:"25%",borderRadius:".25rem 0 0 .25rem"},onChange:function(e){return S(e.target.value)},value:C,placeholder:"Title"}),Object(m.jsx)("input",{type:"text",className:"form-control input-message mr-2",style:{width:"65%",borderRadius:"0 .25rem .25rem 0"},onChange:function(e){return A(e.target.value)},value:T,placeholder:"Message"}),Object(m.jsx)("button",{className:"btn btn-outline-success",type:"button","data-id":e.docToken,onClick:function(e){return B(e)},children:"Update"})]})]},t)})):Object(m.jsx)("div",{className:"text-center font-italic m-5",children:"\u041d\u0435\u0442 \u043f\u043e\u0441\u0442\u043e\u0432"})})]})},x=function(){var e=Object(a.useContext)(w).auth,t=Object(p.a)(e),n=Object(o.a)(t,3),s=(n[0],n[1]);n[2];return s?Object(m.jsx)(f,{}):Object(m.jsxs)(i.a,{children:[Object(m.jsx)(h,{}),Object(m.jsx)(O,{})]})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,54)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};n(51),n(52);j.a.initializeApp({apiKey:"AIzaSyA06wnl2Mdgdm-uHrSG_gG6wiw797UFf5k",authDomain:"react-blog-7b6ce.firebaseapp.com",projectId:"react-blog-7b6ce",storageBucket:"react-blog-7b6ce.appspot.com",messagingSenderId:"356829308813",appId:"1:356829308813:web:612d09ca31303ee9157fc4",measurementId:"G-TZFT6FGHBX"});var y=j.a.auth(),N=j.a.firestore(),w=Object(a.createContext)(null);r.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(w.Provider,{value:{auth:y,firebase:j.a,firestore:N},children:Object(m.jsx)(x,{})})}),document.getElementById("root")),v()}},[[53,1,2]]]);
//# sourceMappingURL=main.3ae5b6db.chunk.js.map