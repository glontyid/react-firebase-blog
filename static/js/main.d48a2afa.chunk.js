(this["webpackJsonpreact-firebase-blog"]=this["webpackJsonpreact-firebase-blog"]||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t),n.d(t,"Context",(function(){return T}));var a=n(2),c=n.n(a),s=n(33),r=n.n(s),o=(n(41),n(12)),i=(n(42),n(24)),l=n(13),u=n.n(l),d=n(19),b=n(9),p=n(18),j=n(17),m=n(4),h=function(e){var t=Object(a.useContext)(T).auth,n=Object(p.a)(t),c=Object(o.a)(n,1)[0],s=function(){var e=Object(d.a)(u.a.mark((function e(){var n,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new j.a.auth.GoogleAuthProvider,e.next=3,t.signInWithPopup(n);case 3:a=e.sent,c=a.user,console.log(c);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("nav",{className:"container navbar navbar-light justify-content-between",style:{height:"66px"},children:[Object(m.jsx)(b.b,{to:"/",className:"navbar-brand",children:c?Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{className:"mr-2",children:Object(m.jsx)("img",{src:c.photoURL,alt:c.photoURL,style:{borderRadius:"50%",width:"50px",height:"50px"}})}),Object(m.jsx)("span",{children:c.displayName})]}):Object(m.jsx)("span",{children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0430\u0432\u0442\u043e\u0438\u0437\u043e\u0432\u0430\u043d"})}),c?Object(m.jsx)("button",{onClick:function(){return t.signOut()},className:"btn btn-outline-danger my-2 my-sm-0",type:"submit",children:"Sign out"}):Object(m.jsx)("button",{onClick:s,className:"btn btn-outline-success my-2 my-sm-0",type:"submit",children:"Sign in"})]})},g="/login",O="/posts",f=n(36),x=function(){return Object(m.jsx)("div",{className:"loader"})},v=function(){var e=Object(a.useContext)(T),t=e.auth,n=e.firestore,c=Object(p.a)(t),s=Object(o.a)(c,1)[0],r=Object(a.useState)(""),i=Object(o.a)(r,2),l=i[0],b=i[1],h=Object(a.useState)(""),g=Object(o.a)(h,2),O=g[0],v=g[1],y=Object(a.useState)(""),N=Object(o.a)(y,2),C=N[0],w=N[1],S=Object(a.useState)(""),k=Object(o.a)(S,2),L=k[0],A=k[1],R=Object(f.a)(n.collection("posts").orderBy("createdAt")),F=Object(o.a)(R,2),I=F[0],_=F[1];n.collection("posts").get().then((function(e){e.docs.forEach((function(e){n.collection("posts").doc(e.id).update({docToken:e.id})}))}));var q=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s?(a=t.target.closest(".input-group").querySelector(".input-title"),c=t.target.closest(".input-group").querySelector(".input-message"),l.length>0&&O.length>0?(n.collection("posts").add({uid:s.uid,displayName:s.displayName,photoURL:s.photoURL,email:s.email,title:O,text:l,createdAt:j.a.firestore.FieldValue.serverTimestamp()}),b(""),v(""),c.classList.remove("alert-danger"),c.classList.remove("alert-success"),a.classList.remove("alert-danger"),a.classList.remove("alert-success")):(a.value.length<1?a.classList.add("alert-danger"):a.classList.add("alert-success"),c.value.length<1?c.classList.add("alert-danger"):c.classList.add("alert-success"))):alert("\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.getAttribute("data-id"),n.collection("posts").doc(a).delete();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,c,s,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.getAttribute("data-id"),c=t.target.closest(".jumbotron").querySelector(".input-group__doc-change"),s=t.target.closest(".jumbotron").querySelector(".input-title").value,r=t.target.closest(".jumbotron").querySelector(".input-message").value,n.collection("posts").doc(a).update({title:s,text:r}),c.classList.remove("active"),A(""),w("");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return _?Object(m.jsx)(x,{}):Object(m.jsxs)("div",{className:"container",children:[Object(m.jsxs)("div",{className:"input-group mb-2",children:[Object(m.jsx)("input",{type:"text",className:"form-control input-title",style:{width:"25%",borderRadius:".25rem 0 0 .25rem"},onChange:function(e){return v(e.target.value)},value:O,placeholder:"Title"}),Object(m.jsx)("input",{type:"text",className:"form-control input-message mr-2",style:{width:"65%",borderRadius:"0 .25rem .25rem 0"},onChange:function(e){return b(e.target.value)},value:l,placeholder:"Message"}),Object(m.jsx)("button",{className:"btn btn-outline-primary",type:"button",onClick:function(e){return q(e)},children:"Add post"})]}),Object(m.jsx)("div",{children:I.length?I.map((function(e,t){return Object(m.jsxs)("div",{className:"jumbotron position-relative",children:[Object(m.jsx)("h1",{className:"display-4",children:e.title}),Object(m.jsx)("p",{className:"lead",children:e.text}),Object(m.jsx)("hr",{className:"my-4"}),Object(m.jsxs)("p",{children:["Author: ",e.displayName," / ",e.email]}),!(!s||s.uid!==e.uid)&&Object(m.jsxs)("div",{className:"d-flex justify-content-end",style:{position:"absolute",top:"1rem",right:"1rem"},children:[Object(m.jsx)("button",{type:"button",className:"close mr-2",style:{fontSize:"1rem"},"data-id":e.docToken,onClick:function(e){return e.target.closest(".jumbotron").querySelector(".input-group__doc-change").classList.toggle("active")},"aria-label":"Close",children:"change"}),Object(m.jsx)("button",{type:"button",className:"close",style:{fontSize:"1rem"},"data-id":e.docToken,onClick:function(e){return U(e)},"aria-label":"Close",children:"delete"})]}),Object(m.jsxs)("div",{className:"input-group m-2 position-absolute input-group__doc-change",style:{bottom:"0",left:"0"},children:[Object(m.jsx)("input",{type:"text",className:"form-control input-title",style:{width:"25%",borderRadius:".25rem 0 0 .25rem"},onChange:function(e){return w(e.target.value)},value:C,placeholder:"Title"}),Object(m.jsx)("input",{type:"text",className:"form-control input-message mr-2",style:{width:"65%",borderRadius:"0 .25rem .25rem 0"},onChange:function(e){return A(e.target.value)},value:L,placeholder:"Message"}),Object(m.jsx)("button",{className:"btn btn-outline-success",type:"button","data-id":e.docToken,onClick:function(e){return B(e)},children:"Update"})]})]},t)})):Object(m.jsx)("div",{className:"text-center font-italic m-5",children:"\u041d\u0435\u0442 \u043f\u043e\u0441\u0442\u043e\u0432"})})]})},y=[{path:g,Component:v}],N=[{path:O,Component:v}],C=function(){var e=Object(a.useContext)(T).auth,t=Object(p.a)(e);return Object(o.a)(t,1)[0]?Object(m.jsxs)(b.d,{children:[N.map((function(e){var t=e.path,n=e.Component;return Object(m.jsx)(b.b,{path:t,component:n,exact:!0},n)})),Object(m.jsx)(b.a,{to:O})]}):Object(m.jsxs)(b.d,{children:[y.map((function(e){var t=e.path,n=e.Component;return Object(m.jsx)(b.b,{path:t,component:n,exact:!0},n)})),Object(m.jsx)(b.a,{to:g})]})},w=function(){var e=Object(a.useContext)(T).auth,t=Object(p.a)(e),n=Object(o.a)(t,3),c=(n[0],n[1]);n[2];return c?Object(m.jsx)(x,{}):Object(m.jsxs)(i.a,{children:[Object(m.jsx)(h,{}),Object(m.jsx)(C,{})]})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,54)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};n(51),n(52);j.a.initializeApp({apiKey:"AIzaSyA06wnl2Mdgdm-uHrSG_gG6wiw797UFf5k",authDomain:"react-blog-7b6ce.firebaseapp.com",projectId:"react-blog-7b6ce",storageBucket:"react-blog-7b6ce.appspot.com",messagingSenderId:"356829308813",appId:"1:356829308813:web:612d09ca31303ee9157fc4",measurementId:"G-TZFT6FGHBX"});var k=j.a.auth(),L=j.a.firestore(),T=Object(a.createContext)(null);r.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(T.Provider,{value:{auth:k,firebase:j.a,firestore:L},children:Object(m.jsx)(w,{})})}),document.getElementById("root")),S()}},[[53,1,2]]]);
//# sourceMappingURL=main.d48a2afa.chunk.js.map