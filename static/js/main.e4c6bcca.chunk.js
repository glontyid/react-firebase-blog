(this["webpackJsonpreact-firebase-blog"]=this["webpackJsonpreact-firebase-blog"]||[]).push([[0],{41:function(e,t,a){},42:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t),a.d(t,"Context",(function(){return w}));var n=a(2),s=a.n(n),c=a(33),r=a.n(c),o=(a(41),a(12)),i=(a(42),a(24)),l=a(13),u=a.n(l),d=a(19),b=a(9),p=a(18),j=a(17),m=a(4),h=function(e){var t=Object(n.useContext)(w).auth,a=Object(p.a)(t),s=Object(o.a)(a,1)[0],c=function(){var e=Object(d.a)(u.a.mark((function e(){var a,n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new j.a.auth.GoogleAuthProvider,e.next=3,t.signInWithPopup(a);case 3:n=e.sent,s=n.user,console.log(s);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("nav",{className:"container navbar navbar-light justify-content-between",style:{height:"66px"},children:[Object(m.jsx)(b.b,{to:"/",className:"navbar-brand",children:s?Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{className:"mr-2",children:Object(m.jsx)("img",{src:s.photoURL,alt:s.photoURL,style:{borderRadius:"50%",width:"50px",height:"50px"}})}),Object(m.jsx)("span",{children:s.displayName})]}):Object(m.jsx)("span",{children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0430\u0432\u0442\u043e\u0438\u0437\u043e\u0432\u0430\u043d"})}),s?Object(m.jsx)("button",{onClick:function(){return t.signOut()},className:"btn btn-outline-danger my-2 my-sm-0",type:"submit",children:"Sign out"}):Object(m.jsx)("button",{onClick:c,className:"btn btn-outline-success my-2 my-sm-0",type:"submit",children:"Sign in"})]})},g=a(36),f=function(){return Object(m.jsx)("div",{className:"loader"})},O=function(){var e=Object(n.useContext)(w),t=e.auth,a=e.firestore,s=Object(p.a)(t),c=Object(o.a)(s,1)[0],r=Object(n.useState)(""),i=Object(o.a)(r,2),l=i[0],b=i[1],h=Object(n.useState)(""),O=Object(o.a)(h,2),x=O[0],v=O[1],y=Object(n.useState)(""),N=Object(o.a)(y,2),C=(N[0],N[1]),S=Object(n.useState)(""),k=Object(o.a)(S,2),L=(k[0],k[1]),T=Object(g.a)(a.collection("posts").orderBy("createdAt")),A=Object(o.a)(T,2),R=A[0],F=A[1];a.collection("posts").get().then((function(e){e.docs.forEach((function(e){a.collection("posts").doc(e.id).update({docToken:e.id})}))}));var I=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c?(n=t.target.closest(".input-group").querySelector(".input-title"),s=t.target.closest(".input-group").querySelector(".input-message"),l.length>0&&x.length>0?(a.collection("posts").add({uid:c.uid,displayName:c.displayName,photoURL:c.photoURL,email:c.email,title:x,text:l,createdAt:j.a.firestore.FieldValue.serverTimestamp()}),b(""),v(""),s.classList.remove("alert-danger"),s.classList.remove("alert-success"),n.classList.remove("alert-danger"),n.classList.remove("alert-success")):(n.value.length<1?n.classList.add("alert-danger"):n.classList.add("alert-success"),s.value.length<1?s.classList.add("alert-danger"):s.classList.add("alert-success"))):alert("\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.getAttribute("data-id"),a.collection("posts").doc(n).delete();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,s,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.getAttribute("data-id"),s=t.target.closest(".jumbotron").querySelector(".input-group__doc-change"),c=t.target.closest(".jumbotron").querySelector(".input-title").value,r=t.target.closest(".jumbotron").querySelector(".input-message").value,a.collection("posts").doc(n).update({title:c,text:r}),s.classList.remove("active");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return F?Object(m.jsx)(f,{}):Object(m.jsxs)("div",{className:"container",children:[Object(m.jsxs)("div",{className:"input-group mb-2",children:[Object(m.jsx)("input",{type:"text",className:"form-control input-title",style:{width:"25%",borderRadius:".25rem 0 0 .25rem"},onChange:function(e){return v(e.target.value)},value:x,placeholder:"Title"}),Object(m.jsx)("input",{type:"text",className:"form-control input-message mr-2",style:{width:"65%",borderRadius:"0 .25rem .25rem 0"},onChange:function(e){return b(e.target.value)},value:l,placeholder:"Message"}),Object(m.jsx)("button",{className:"btn btn-outline-primary",type:"button",onClick:function(e){return I(e)},children:"Add post"})]}),Object(m.jsx)("div",{children:R.length?R.map((function(e,t){return Object(m.jsxs)("div",{className:"jumbotron position-relative",children:[Object(m.jsx)("h1",{className:"display-4",children:e.title}),Object(m.jsx)("p",{className:"lead",children:e.text}),Object(m.jsx)("hr",{className:"my-4"}),Object(m.jsxs)("p",{children:["Author: ",e.displayName," / ",e.email]}),!(!c||c.uid!==e.uid)&&Object(m.jsxs)("div",{className:"d-flex justify-content-end",style:{position:"absolute",top:"1rem",right:"1rem"},children:[Object(m.jsx)("button",{type:"button",className:"close mr-2",style:{fontSize:"1rem"},"data-id":e.docToken,onClick:function(e){return e.target.closest(".jumbotron").querySelector(".input-group__doc-change").classList.toggle("active")},"aria-label":"Close",children:"change"}),Object(m.jsx)("button",{type:"button",className:"close",style:{fontSize:"1rem"},"data-id":e.docToken,onClick:function(e){return _(e)},"aria-label":"Close",children:"delete"})]}),Object(m.jsxs)("div",{className:"input-group m-2 position-absolute input-group__doc-change",style:{bottom:"0",left:"0"},children:[Object(m.jsx)("input",{type:"text",className:"form-control input-title",style:{width:"25%",borderRadius:".25rem 0 0 .25rem"},onChange:function(e){return C(e.target.value)},defaultValue:e.title,placeholder:"Title"}),Object(m.jsx)("input",{type:"text",className:"form-control input-message mr-2",style:{width:"65%",borderRadius:"0 .25rem .25rem 0"},onChange:function(e){return L(e.target.value)},defaultValue:e.text,placeholder:"Message"}),Object(m.jsx)("button",{className:"btn btn-outline-success",type:"button","data-id":e.docToken,onClick:function(e){return q(e)},children:"Update"})]})]},t)})):Object(m.jsx)("div",{className:"text-center font-italic m-5",children:"\u041d\u0435\u0442 \u043f\u043e\u0441\u0442\u043e\u0432"})})]})},x=function(){var e=Object(n.useContext)(w).auth,t=Object(p.a)(e),a=Object(o.a)(t,3),s=(a[0],a[1]);a[2];return s?Object(m.jsx)(f,{}):Object(m.jsxs)(i.a,{children:[Object(m.jsx)(h,{}),Object(m.jsx)(O,{})]})},v=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,54)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};a(51),a(52);j.a.initializeApp({apiKey:"AIzaSyA06wnl2Mdgdm-uHrSG_gG6wiw797UFf5k",authDomain:"react-blog-7b6ce.firebaseapp.com",projectId:"react-blog-7b6ce",storageBucket:"react-blog-7b6ce.appspot.com",messagingSenderId:"356829308813",appId:"1:356829308813:web:612d09ca31303ee9157fc4",measurementId:"G-TZFT6FGHBX"});var y=j.a.auth(),N=j.a.firestore(),w=Object(n.createContext)(null);r.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(w.Provider,{value:{auth:y,firebase:j.a,firestore:N},children:Object(m.jsx)(x,{})})}),document.getElementById("root")),v()}},[[53,1,2]]]);
//# sourceMappingURL=main.e4c6bcca.chunk.js.map